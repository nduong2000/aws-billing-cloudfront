graph TB
    %% User and External Access
    User[ğŸ‘¤ User] --> CF[â˜ï¸ CloudFront Distribution<br/>d27z0qz3ducsem.cloudfront.net]

    %% CloudFront Configuration
    CF --> |Cache Miss| S3[ğŸª£ S3 Bucket<br/>medical-billing-frontend-v2-20250526]
    CF --> |Cache Hit| Cache[ğŸ’¾ CloudFront Cache<br/>HTML: no-cache<br/>Assets: 5min cache]

    %% S3 Static Website
    S3 --> |Serves| StaticFiles[ğŸ“ Static Files<br/>index.html<br/>assets/index-*.js<br/>assets/index-*.css]

    %% React Application Structure
    subgraph "React Application"
        App[âš›ï¸ App.jsx<br/>Main Router] --> Nav[ğŸ§­ Navigation Component]
        App --> Routes[ğŸ›£ï¸ React Router]

        Routes --> Home[ğŸ  HomePage]
        Routes --> Patients[ğŸ‘¥ PatientsPage]
        Routes --> Providers[ğŸ¥ ProvidersPage]
        Routes --> Services[ğŸ”§ ServicesPage]
        Routes --> Appointments[ğŸ“… AppointmentsPage]
        Routes --> Claims[ğŸ“‹ ClaimsPage]
        Routes --> Audit[ğŸ” AuditPage]
        Routes --> Test[ğŸ§ª SimpleOllamaTest]

        %% Detail and Form Pages
        Patients --> PatientDetail[ğŸ‘¤ PatientDetailPage]
        Patients --> PatientForm[ğŸ“ PatientFormPage]
        Providers --> ProviderDetail[ğŸ¥ ProviderDetailPage]
        Providers --> ProviderForm[ğŸ“ ProviderFormPage]
        Services --> ServiceForm[ğŸ“ ServiceFormPage]
        Appointments --> AppointmentDetail[ğŸ“… AppointmentDetailPage]
        Appointments --> AppointmentForm[ğŸ“ AppointmentFormPage]
        Claims --> ClaimDetail[ğŸ“‹ ClaimDetailPage]
        Claims --> ClaimForm[ğŸ“ ClaimFormPage]
    end

    %% API Communication
    subgraph "API Layer"
        APIService[ğŸ”Œ API Services<br/>src/services/]
        APIService --> Backend[ğŸš€ Lambda Backend<br/>FastAPI + Mangum]
    end

    %% Connect React to API
    Home -.-> APIService
    Patients -.-> APIService
    Providers -.-> APIService
    Services -.-> APIService
    Appointments -.-> APIService
    Claims -.-> APIService
    Audit -.-> APIService
    Test -.-> APIService

    %% CI/CD Pipeline
    subgraph "CI/CD Pipeline"
        GitHub[ğŸ“š GitHub Repository<br/>aws-billing-cloudfront] --> Actions[âš™ï¸ GitHub Actions<br/>deploy.yml]
        Actions --> Build[ğŸ”¨ npm run build<br/>Vite Build Process]
        Build --> Deploy[ğŸš€ Deploy to S3<br/>aws s3 sync]
        Deploy --> Invalidate[ğŸ”„ CloudFront Invalidation<br/>Cache Refresh]
    end

    %% Development Flow
    Dev[ğŸ‘¨â€ğŸ’» Developer] --> |git push| GitHub
    GitHub --> |Triggers| Actions
    Actions --> |Updates| S3
    Invalidate --> |Refreshes| CF

    %% Styling
    classDef aws fill:#ff9900,stroke:#232f3e,stroke-width:2px,color:#fff
    classDef react fill:#61dafb,stroke:#20232a,stroke-width:2px,color:#20232a
    classDef api fill:#4caf50,stroke:#2e7d32,stroke-width:2px,color:#fff
    classDef cicd fill:#2196f3,stroke:#0d47a1,stroke-width:2px,color:#fff
    classDef user fill:#9c27b0,stroke:#4a148c,stroke-width:2px,color:#fff

    class CF,S3,Cache aws
    class App,Nav,Routes,Home,Patients,Providers,Services,Appointments,Claims,Audit,Test,PatientDetail,PatientForm,ProviderDetail,ProviderForm,ServiceForm,AppointmentDetail,AppointmentForm,ClaimDetail,ClaimForm react
    class APIService,Backend api
    class GitHub,Actions,Build,Deploy,Invalidate cicd
    class User,Dev user